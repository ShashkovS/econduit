(function(){function a(){function c(){$.ajax({type:"POST",url:"ajax/GetStats.php",dataType:"html",data:{StartDate:$("#StartDate").val(),EndDate:$("#EndDate").val()},context:$(".stats_container"),success:function(j){this.html(j);var k={0:{lockedOrder:"asc"}};for(var h=1,g=this.find(".headerRow").eq(0).children().length;h<g;++h){k[h]={lockedOrder:"desc"}}this.children(".stats").tablesorter({cssAsc:"sortIndex",cssDesc:"sortIndex",sortList:[[1,1]],sortAppend:[[0,0]],headers:k,widgets:["stickyHeaders"]});this.find("thead th").attr("title","Отсортировать")},error:function(g,i,h){alert("Не удалось получить ответ от сервера: "+g.status+" "+i)}})}function f(){$(this).siblings(".pupilName").andSelf().addClass("mouseOver");$(".stats_container .headerRow").children(":nth-child("+(this.cellIndex+1)+")").addClass("mouseOver")}function e(){$(this).parent().addClass("mouseOver")}function b(){$(".stats_container tr").children(":nth-child("+(this.cellIndex+1)+")").addClass("mouseOver")}function d(){$(".stats_container *").removeClass("mouseOver")}this.init=function(){var h=$(".stats_container");h.on({mouseover:b,mouseout:d},".stats .list");h.on({mouseover:e,mouseout:d},".stats .pupilName");h.on({mouseover:f,mouseout:d},".stats td");$("#StartDate, #EndDate").datepicker({constrainInput:true,showButtonPanel:true,showOtherMonths:true,navigationAsDateFormat:true,changeMonth:true});var g=$.fn.Today();$("#EndDate").datepicker("setDate",g);g.setDate(1);$("#StartDate").datepicker("setDate",g);$("#Submit").click(c);c()}}window.Stats=new a()})();