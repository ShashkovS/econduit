(function(b){function a(){var d=1;this.init=function(){var f=localStorage.getItem("XML_WIDTH");if(f!=null){b("#XML").width(f)}var e=localStorage.getItem("XML_HEIGHT");if(e!=null){b("#XML").height(e)}if(document.getElementById("XML").onscroll.name!=""){b("#XML").resizable({resize:c.resizeRuler,stop:function(){localStorage.setItem("XML_WIDTH",b("#XML").width());localStorage.setItem("XML_HEIGHT",b("#XML").height())},handles:"se"});b(".ui-wrapper").css("padding-bottom","");b("#Ruler").removeAttr("hidden");c.resizeRuler();c.scrollRuler()}else{b("#XML").resizable({handles:"se"})}b("#uploadForm").ajaxForm({dataType:"json",success:function(g){if(g.code==0){b("#XML").val("")}alert(g.message)},error:function(g,j,h){var i="Не удалось получить ответ от сервера: ";alert(i+g.status+" "+j)}})};this.resizeRuler=function(){var e=b("#Ruler");e.height(b("#XML").height());var h=e.scrollTop();e.scrollTop(h+1);while(e.scrollTop()<=h){var g=e.html();for(var f=0;f<50;f++){g+="<br/>"+(++d)}e.html(g).scrollTop(h+1)}e.scrollTop(h)};this.scrollRuler=function(){var e=b("#Ruler");var g=b("#XML").scrollTop();e.scrollTop(g);while(e.scrollTop()<g){var h=e.html();for(var f=0;f<50;f++){h+="<br/>"+(++d)}e.html(h).scrollTop(g)}};var c=this}window.UploadManager=new a()})(jQuery);